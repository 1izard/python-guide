# Chapter4 基本データ構造

# 基本データ構造

この章では，複数の値を保持するために使用される基本的なデータ構造を導入します．  
具体的には以下になります．  

|       名前        |                 説明                 |                  例                   |               特徴                |
| :---------------: | :----------------------------------: | :-----------------------------------: | :-------------------------------: |
|       List        |          複数のデータを格納          |              `[1, 2, 3]`              |    ミュータブル(値を変更可能)     |
|  Tuple (タプル)   |          複数のデータを格納          |              `(1, 2, 3)`              | イミュータブル (値を変更できない) |
| Dictionary(=辞書) | key, valueのペアで複数のデータを格納 | `{"name": "Flareon", "type": "Fire"}` |           ミュータブル            |

<br>

# List

例を見てわかる通り，複数の値を保持するデータ構造です．  
ほかの言語では配列にあたりますが，PythonのListにはint型でもstr型でもなんでも格納できます．  

```python
int_list = [10, 11, 12, 13, 14, 15]
float_list = [3.1, -6.2, -190.2, 66.7]
str_list = ["Eevee", "Vaporeon", "Jolteon", "Flareon"]
bool_list = [True, False, True]
misc_list = [10, 3.1, "Eevee"]
empty_list = []
```

多次元にもできます．  

```python
list_2_3 = [
  [10, 11, 12],
  [20, 21, 22]
]   # 2 x 3

list_2_2_3 = [
  [
    [100, 101, 102],
    [110, 111, 112],
  ],
  [
    [200, 201, 202],
    [210, 211, 212]
  ]
]   # 2 x 2 x 3

misc_list = [
  0, 1, 2,
  [10, 11],
  [
    [100, 101, 102, 103],
    [110, 111, 112, 113]
  ]
]
```


## 初期化

Listの初期化にはいろいろな方法があります．  
後から参照しやすいよう各ケースごとにまとめようとした分ちょっと詰め込みすぎてしまったので，途中で飽きた場合はインデックスの項目に進んでもらってもOKです．  
わからなくなったり忘れたりしたらここを探してみてください．  

### 要素で初期化

これまでの例のように，`[]`の中に要素を `,`(カンマ) で区切って羅列することで，それらの要素を含んだListオブジェクト(=List型の具体物のこと．int型の値などとは違ってList型の値とは呼べないのでオブジェクトと呼ぶことにしましょう)が作れます．  
`[]` の中に何も要素を入れない場合は空リストになります．  

```python
int_list = [10, 11, 12, 13, 14, 15]
empty_list = []
```

同じ値の複数個の要素で初期化する場合は `*`演算子で要素を繰り返して生成することができます．(`*`演算子は初期化以外のときでもListをコピーするために使用できます)

```python
ones = [1] * 5    # [1, 1, 1, 1, 1]
one_two_threes = [1, 2, 3] * 3    # [1, 2, 3, 1, 2, 3, 1, 2, 3]
```

(以下はList内包表記，オフセットの項目のあとに読んでください)  
多次元Listの初期化に `*` を使う場合には注意が必要です．  
たとえば以下のように初期化したとしましょう．  

```python
x = [[0] * 2] * 3   # [[0, 0], [0, 0], [0, 0]]
```

これは以下と同じことをしています．  

```python
e = [0] * 2
x = [e, e, e]    # [[0, 0], [0, 0], [0, 0]]
```

この場合，たとえば `x[0][0]` に1を代入すると `x[1][0]`，`x[2][0]` も1になります．  

```python
x[0][0] = 1
print(x)    # [[1, 0], [1, 0], [1, 0]]
```

理由は，`*` によるListのコピーが浅いコピー(Shallow Copy)であり，リスト`x[0]`，`x[1]`， `x[2]` がすべて同じ要素を参照しているからです．  
回避案としては，最も内側のListだけを `*` で生成し，残りをList内包表記で書けば，`*` に準ずる簡潔さでListを作れます．  

```python
x = [[0] * 2 for _ in range(3)]   # [[0, 0], [0, 0], [0, 0]]
x[0][0] = 1
print(x)    # [[1, 0], [0, 0], [0, 0]]
```

(ここまで後回し)

### `list()`で初期化

組込み関数 `list()` にIterableオブジェクトを与えることでListを作成します．  
Iterable(=反復可能=要素を順々に辿ることのできる)オブジェクトとはTupleやDictionaryなどのオブジェクトのことをいいます．  
ListオブジェクトもIterableオブジェクトです．  
とりあえず値がいっぱい並んでる感じのは大体そうです．  

`list()` を使って，TupleやDictionaryオブジェクトからListオブジェクトを作れます．  
Tupleはイミュータブル(=値を変更できない)ですが，Listはミュータブル(=値を変更可能)です．  
また，Dicrionaryを引数として与えると全てのkeyのListが作られます．  

```python
list_from_tuple = list((1, 2, 3))   # [1, 2, 3]
list_from_dicrionary = list({"name": "Flareon", "type": "Fire"})  # ["name", "type"]
```

文字列(=strオブジェクト)もListにできます．  

```python
list_from_str = list("一文字ずつ要素になります．")
# ['一', '文', '字', 'ず', 'つ', '要', '素', 'に', 'な', 'り', 'ま', 'す', '．']
```

よく使われるのは `range()` 関数です．  
この関数は引数として `start`，`end`，`step` をとり，それらをもとに整数の数列を作ります．  
その数列を `list()` に渡すと数列のListを作ることができます．  
いくつか例を見てましょう．  

```python
list_0_10_1 = list(range(0, 10, 1))   # [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
list_5_20_2 = list(range(5, 20, 2))   # [5, 7, 9, 11, 13, 15, 17, 19]
list_m3_3_1 = list(range(-3, 3, 1))   # [-3, -2, -1, 0, 1, 2]
list_9_m1_m1 = list(range(9, -1, -1)) # [9, 8, 7, 6, 5, 4, 3, 2, 1, 0]
```

`start`，`end`，`step` の指定の仕方は文字列のスライスと同じです．  
区間は `[start, end)` で，**`end` の数は含まれません**．  
`step` を負数にすると逆順になります．  
`range(start, -1, -1)` で `start` から0まで１ずつカウントダウンするのはよく使うので覚えておくとよいです．  

`start` を省略すると `start = 0`， `step` を省略すると `step = 1` になります．  

```python
list_0_10_1 = list(range(0, 10, 1))   # [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
list_x_10_1 = list(range(10, 1))   # [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
list_x_10_x = list(range(10))   # [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
```

### List内包表記

Python特有の書き方です．  
書式は `[ expression for item in iterable ]` です．  
最初はうへーってなりますが，1行でいろんなリストを作れるので便利です．  
と言いつつ自分は初めてPythonを勉強したときは理解できなくて飛ばしました．  
なぜこんな書き方ができるのかとかあんまり深いことは考えずに，丸暗記して慣れることをおすすめします．  

```python
list1 = [i for i in range(10)]  # 
```

## インデックス

str型と同様に，Listのインデックスは0番目から始まります．  
`[n]` の書式で，Listのn番目の要素を取得することができます．  

```python

```


## len()

str型と同様，Listの長さ=要素数も組込み関数 `len()` で計算することができます．  

```python
int_list = [10, 11, 12, 13, 14, 15]
int_list_length = len(int_list)   # 6

empty_list = []
empty_list_length = len(empty_list)   # 0
```
